---
import { getCollection, render } from "astro:content";
import { Image } from "astro:assets";
const { title } = Astro.props;
const allCases = await getCollection('cases');
const cases = await Promise.all(
  allCases.map(async (item) => {
    // 3. Llamar a render() en CADA item individual
    const { Content } = await render(item);
    return {
      // Mantenemos el Front Matter (metadata)
      data: item.data, 
      // Agregamos el componente de contenido renderizado
      Content: Content 
    };
  })
);
---

<section id="community" class="text-white">
        <div class="mx-auto max-w-5xl px-4 py-8 md:py-10">
        
        { cases.map((item) => (
          
          <div class="group relative h-40 w-[88%] -ml-2 md:-ml-6 rounded-2xl bg-[color:var(--accent)]/95 overflow-hidden">
<div class="p-10">
            <h2 class="bs-h2">{item.data.title}</h2>
            </div>        <span class="pointer-events-none absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-[120%] transition-transform duration-[1600ms] ease-out group-hover:translate-x-[120%]"></span>
         </div>
         

          <figure
            class="relative z-10 -mt-10 shadow-xl overflow-hidden border border-black/5 rounded-3xl"
          >
            <Image
              src={item.data.image}
              alt={item.data.image_alt}
              class="block w-full h-[360px] md:h-[420px] object-cover transition-transform duration-500 ease-[cubic-bezier(.2,.8,.2,1)] hover:scale-[1.05] will-change-transform"
              loading="eager"
            />

          </figure>

        <div class="mt-8 bs-body-text text-bs-surface-0">
          <item.Content/>
          
        </div>
        ))}
      </section>